---
title: è¿œæ™ºå­¦å ‚æœŸæœ«è€ƒè¯•ä¹‹è¯•å·æŠ“åŒ…åŠé€šè¿‡JSè„šæœ¬å®ç°ä¸€é”®ç­”é¢˜
tags:
  - Geek
  - è¿œæ™ºå­¦å ‚
categories:
  - å®ç”¨æŠ€èƒ½
abbrlink: 625924666
date: 2023-01-08 16:27:01
---

å› ä¸ºå‚åŠ äº†è¿œæ™ºçš„å­¦å†æå‡è®¡åˆ’ï¼Œè¦å‚åŠ æœŸæœ«è€ƒè¯•ï¼Œæˆ‘é€‰çš„è¿™ä¸ªä¸“ä¸šæ¯æ¬¡è¿˜è¦è€ƒåå…­ä¸ªç§‘ç›®ğŸ˜¢ï¼Œå› ä¸ºä¸“ä¸šä¸ç›¸å…³ï¼Œæ‰€ä»¥ä¹Ÿæ²¡è®¡åˆ’å»æ·±å…¥å­¦ä¹ ã€‚åˆå› ä¸ºè€ƒè¯•æ—¶ä¸èƒ½æ‰“å¼€ä»–ä»¬æ‰‹æœºç«¯çš„APPé¢˜åº“ï¼Œæ‰€ä»¥å¾ˆå¤šäººéƒ½å¾—å…ˆåœ¨æ‰‹æœºä¸Šä¸€ä¸ªé¢˜ç›®ä¸€ä¸ªé¢˜ç›®çš„æˆªå›¾ï¼Œå¦‚æœæ˜¯æˆ‘ï¼Œå¾—æˆª16ç§‘*æ¯ç§‘30é“é¢˜â‰ˆ480å¼ å›¾ï¼Œç„¶åè¿˜æ²¡æ³•æœç´¢...æœ¬ç€èŠ‚çœæ—¶é—´çš„å®—æ—¨ï¼Œä¸å¾—å‡ºæ­¤ä¸‹ç­–ï¼Œå¦å¤–ä¸ºäº†æ–¹ä¾¿å…¶ä»–æœ‰è¿™æ–¹é¢éœ€æ±‚çš„åŒå­¦ï¼Œç‰¹åˆ«å‘å‡ºè¿™ç¯‡blog~

<!-- more -->

## ç›®çš„

é€šè¿‡APPæŠ“åŒ…è¿œæ™ºé¢˜åº“ï¼Œå°†é¢˜åº“ä»¥jsonæ–‡ä»¶å‚¨å­˜ï¼Œç„¶åé€šè¿‡JSè„šæœ¬ç‚¹å‡»è‡ªåŠ¨é€‰æ‹©æé€‰é¡¹æ¥å®ç°è‡ªåŠ¨ç­”é¢˜ã€‚

## æŠ“åŒ…

### ç”µè„‘ç«¯ä¸‹è½½å¹¶æ¿€æ´»CharlesæŠ“åŒ…å·¥å…·

1. [ç‚¹å‡»ä¸‹è½½å®‰è£…åŒ…](https://www.charlesproxy.com/download/)
2. æ‰“å¼€Charle - Help - Register Charlesï¼Œä»»æ„è¾“å…¥å­—ç¬¦ï¼ˆå¦‚`Victor`ï¼‰ï¼›
3. [ç‚¹å‡»è¿›å…¥](https://www.zzzmode.com/mytools/charles/)ç”Ÿæˆæ¿€æ´»å¯†é’¥çš„ç½‘å€ï¼›
4. åœ¨ç½‘é¡µä¸­è¾“å…¥åˆšæ‰çš„å­—ç¬¦ï¼Œç‚¹å‡»ç”Ÿæˆå³ä¼šç”Ÿæˆå¯†é’¥ï¼ˆå¦‚`1ea1b0ced9c48f26b2`)ï¼Œå¤åˆ¶åˆ°Charlesç²˜è´´è¿›å»ç¡®è®¤å³å¯ï¼›
5. åœ¨å·¦ä¸‹è§’çš„`Fliter`è¾“å…¥è¿œæ™ºé¢˜å›¾APIçš„URL`https://onlineexam.yzou.cn`ï¼›

### IOSç«¯é…ç½®ä»£ç†ä¸HTTPSè¯ä¹¦

1. åœ¨æ§åˆ¶å°ä¸­è¾“å…¥`ipconfig`æŸ¥è¯¢å½“å‰ç”µè„‘IPï¼Œå°†ipåœ°å€ä»¥åŠç«¯å£`8888`åœ¨æ‰‹æœºä¸Šé…ç½®ä¸ºä»£ç†ï¼šSettings - WLAN - Wifiè¯¦æƒ… - Configure Proxyï¼›

2. åœ¨æ‰‹æœºä¸Šè®¿é—®`chls.pro/ssl`ï¼Œè¿›å…¥é¡µé¢ä¼šç«‹åˆ»æç¤ºæ­¤ç½‘ç«™å°è¯•ä¸‹è½½è¯ä¹¦ï¼Œç‚¹å‡»å…è®¸å³å¯ï¼›

3. ä¸‹è½½æˆåŠŸåæ‰“å¼€IOS Settingåº”ç”¨ï¼Œç¬¬ä¸€é¡¹èœå•åº”è¯¥å°±æ˜¯`Profile Downloaded`ï¼Œè¿›å»åç‚¹å‡»`Install`ç„¶åè¾“å…¥é”å±å¯†ç ï¼›

4. IOS 10.3ç³»ç»ŸåŠä»¥ä¸Šï¼Œéœ€è¦åœ¨ Settings - General - About - Certificate Trust Settingsé‡Œé¢æ‰¾åˆ°`Charles Proxy CA({å½“å‰æ—¥æœŸ}, {ç”µè„‘åç§°})`ï¼Œæ‰“å¼€ä¿¡ä»»å¼€å…³å³å¯ï¼›

5. Charlesè®¾ç½®Proxyï¼ŒProxy -> SSL Proxying Settings...ï¼Œæ¥ç€å¼¹æ¡†é‡Œå‹¾é€‰Enable SSL Proxyingï¼Œç‚¹å‡»`Include`åˆ—è¡¨ä¸‹çš„`Add`ï¼Œhostå¡«`onlineexam.yzou.cn`ï¼ŒPortå¡«`443`ï¼Œç‚¹å‡»OKå³å¯ï¼›

{% asset_img ssl-add.png %}

è‡³æ­¤åœ¨è¿œæ™ºAPPè®¿é—®è€ƒè¯•ç›¸å…³çš„HTTPSè¯·æ±‚å°±å¯ä»¥åœ¨`Charles`ä¸­çœ‹åˆ°äº†


### æ‰‹æœºç«¯æ‰“å¼€è¯•å·

è¿™é‡Œéå¸¸ç®€å•ï¼Œåœ¨è¿œæ™ºAPP - å­¦å ‚ - æ™ºèƒ½ç»ƒé¢˜  - **é€‰ä¸­è¦è€ƒè¯•çš„ç§‘ç›®** - æ•´å·ç»ƒä¹  - èƒŒé¢˜æ¨¡å¼ï¼Œç‚¹å‡»**æŸ¥çœ‹**è¿›å»

### CharlesæŸ¥çœ‹è¯•å·ç­”æ¡ˆ

è¿›å…¥è¯•å·ç•Œé¢ååœ¨CharlesæŸ¥æ‰¾`getFullPaperInfo.do`è¯·æ±‚å³å¯ã€‚å¦‚ä¸‹å›¾å¯ä»¥çœ‹åˆ°å…¶ä¸­ä¸€ä¸ªå•é€‰é¢˜çš„é¢˜ç›®ã€é€‰é¡¹åŠç­”æ¡ˆï¼š

{% asset_img getFullPaperInfo.png %}

JSONå†…å®¹åº”è¯¥æ˜¯è¿™æ ·ï¼š
``` json
{
	"code": "00",
	"body": {
		"referenceTime": 1673101544933,
		"paperBaseInfo": {...},//è¯•å·ä¿¡æ¯
		"examHeadlineDetail": [...]//è€ƒé¢˜ä¿¡æ¯
	},
	"msg": "",
	"rspTime": 1673101544933,
	"ok": true
}
```

é¢˜åº“å‡†å¤‡å®Œæˆåå°±å¯ä»¥æ ¹æ®é¢˜åº“çš„Jsonæ–‡ä»¶ç”ŸæˆJSè„šæœ¬ç„¶ååœ¨æµè§ˆå™¨ä¸­æ‰§è¡Œæ¥è¾¾åˆ°è‡ªåŠ¨é€‰æ‹©ç­”æ¡ˆçš„ç›®çš„å•¦ğŸ˜

## ç”Ÿæˆè„šæœ¬

è€åŠæ³•ï¼Œå°†ä¸Šé¢æŠ“åˆ°JSONç²˜è´´åˆ°è¾“å…¥æ¡†ï¼Œç‚¹å‡»å‡çº§å°±ä¼šç”ŸæˆJSè„šæœ¬ï¼Œç„¶åç‚¹å‡»å¤åˆ¶ï¼Œå»è¿œæ™ºåœ¨çº¿çš„è€ƒè¯•ç•Œé¢ï¼ŒæŒ‰F12æ‰“å¼€æ§åˆ¶å°å°†è„šæœ¬ç²˜è´´è¿›å»å›è½¦å°±å¥½~

{% raw %}
<script>
    function LetterToNumber(letter) {
        switch (letter) {
            case "A":
                return 0;
            case "B":
                return 1;
            case "C":
                return 2;
            case "D":
                return 3;
            case "E":
                return 4;
            case "F":
                return 5;
            case "G":
                return 6;
            case "H":
                return 7;
            default:
                alert("ERROR: " + letter);
                return -1;
        }
    }
    function setOutput(msg){
      document.getElementById("result").innerText=msg;
    }
    function getJsPaperInfo(jsonData){
      var output = "";
      jsonData.body.examHeadlineDetail.forEach(element => {
          output += "\n//" + element.headlineTitle + "\n";
          if (element.headlineTitle == "å•é€‰é¢˜") {
              for (let index = 0; index < element.examPaperChildVOList[0].examPaperTopicVOList.length; index++) {
                  const item = element.examPaperChildVOList[0].examPaperTopicVOList[index];
                  let anwser = LetterToNumber(item.result);
                  console.log(`${item.topicStems}:${item.result} `);
                  output += (`document.querySelectorAll("#singleCurrentTo${index} .el-radio")[${anwser}].click();\n`);
              }
          } else if (element.headlineTitle == "å¤šé€‰é¢˜") {
              for (let index = 0; index < element.examPaperChildVOList[0].examPaperTopicVOList.length; index++) {
                  const item = element.examPaperChildVOList[0].examPaperTopicVOList[index];
                  console.log(`${item.topicStems}:${item.result}`);
                  for (let ss = 0; ss < item.result.length; ss++) {
                      const letters = item.result[ss];
                      let anwser = LetterToNumber(letters);
                      output += (`await document.querySelectorAll("#moreTopicInfo${index} .el-checkbox")[${anwser}].click();\n`);
                  }
              }
          } else if (element.headlineTitle == "åˆ¤æ–­é¢˜") {
              for (let index = 0; index < element.examPaperChildVOList[0].examPaperTopicVOList.length; index++) {
                  const item = element.examPaperChildVOList[0].examPaperTopicVOList[index];
                  let anwser = LetterToNumber(item.result);
                  console.log(`${item.topicStems}:${item.result} ${anwser}`);
                  output += (`document.querySelectorAll("#judgeTopicInfo${index} .el-radio")[${anwser}].click();\n`);
              }
          } else if (element.headlineTitle == "å¡«ç©ºé¢˜") {
              output += `function gapAQ(selector, text){var elements = document.querySelectorAll(selector);return Array.prototype.filter.call(elements, function(element){return RegExp(text).test(element.textContent);});};`;
              for (let index = 0; index < element.examPaperChildVOList[0].examPaperTopicVOList.length; index++) {
                  const item = element.examPaperChildVOList[0].examPaperTopicVOList[index];
                  let anwser = JSON.parse(item.result);
                  for (let prop in anwser) {
                      console.log(prop);
                      let iii = parseInt(prop.replace('result', '')) - 1;
                      output += (`gapAQ('p','${element.headlineTitle}')[0].parentElement.querySelectorAll("#gapTopicInfo${index} > div.quill_box > div.el-row > div.quill-editor > div.ql-container.ql-snow > div.ql-editor")[${iii}].innerText="${anwser[prop]};"\n`);
                  }
              }
          } else if (element.headlineTitle == "åè¯è§£é‡Šé¢˜") {
              output += `function nounAQ(selector, text){var elements = document.querySelectorAll(selector);return Array.prototype.filter.call(elements, function(element){return RegExp(text).test(element.textContent);});};`;
              for (let index = 0; index < element.examPaperChildVOList[0].examPaperTopicVOList.length; index++) {
                  const item = element.examPaperChildVOList[0].examPaperTopicVOList[index];
                  output += (`nounAQ('p','${element.headlineTitle}')[0].parentElement.querySelector("#qaTopicInfo${index} > div.quill_box > div.el-row > div.quill-editor > div.ql-container.ql-snow > div.ql-editor").innerText="${item.result};"\n`);
              }
          } else {
              alert(`å­˜åœ¨ä¸æ”¯æŒçš„é¢˜å‹[${element.headlineTitle}]ï¼Œè¯·è‡ªè¡Œæ£€æŸ¥ï¼`);
          }
      });
      return output;
    }
    function generate(){
        let jsonStr = document.getElementById("txtJson").value;
        try{
          let paperInfo = JSON.parse(jsonStr)
          console.log({paperInfo})
          let output = getJsPaperInfo(paperInfo);
          setOutput(output);
        }
        catch(e){
          console.error(e);
          setOutput(`JSONæ ¼å¼æœ‰è¯¯`);
        }
    }
    function copyResult(){
      let result = document.getElementById("result").innerText;
      navigator.clipboard.writeText(result);
      alert("å¤åˆ¶æˆåŠŸ");
    }
</script>
<div style="background:#23507f23; padding:10px; border-radius: 10px;margin: 10px 20px;">
   <p style="text-align:center;margin-bottom:10px;">
      <strong>1. å°†JSONå†…å®¹ç²˜åˆ°è¾“å…¥æ¡†</strong>
   </p>
   <div>
      <textarea id="txtJson" style="width:100%; height:100px"></textarea>
   </div>
   <div>
      <button onclick="generate()">2. ç‚¹å‡»ç”Ÿæˆè„šæœ¬</button>
      <hr/>
      <div id="result"></div>
      <button onclick="copyResult()">3. å¤åˆ¶</button>
   </div>
</div>
<style>
    .text-wrapper {
        white-space: pre-wrap;
    }
    #result{
      height: 140px;
      overflow: scroll;
      overflow-x: hidden;
    }
</style>
{% endraw %}

## çªç ´è€ƒè¯•æ—¶é—´è‡³å°‘è¦5åˆ†é’Ÿçš„é™åˆ¶

å…¶å®æˆ‘æœ¬æ¥è§‰å¾—è¿™ä¸ªé™åˆ¶åº”è¯¥æ²¡æ³•çªç ´çš„ï¼Œå› ä¸ºåœ¨åå°ç¨å¾®åˆ¤æ–­ä¸€ä¸‹å°±å¯ä»¥åšåˆ°ï¼Œæ„æƒ³ä¸åˆ°çš„æ˜¯è¿™ä¸ªåˆ¤æ–­é€»è¾‘ç«Ÿç„¶ååœ¨å‰ç«¯ğŸ˜¢æ˜¯æˆ‘æƒ³å¤šäº†ï¼ˆå½“ç„¶ï¼Œä¹Ÿå¯èƒ½æ˜¯åŒè¡Œå¿ƒå­˜å–„æ„ğŸ¤£ğŸ¤£ï¼‰

æ—¢å¦‚æ­¤ï¼Œæ‰“å¼€æ§åˆ¶å°ï¼Œåœ¨`source`ä¸‹çš„`webpack://`æ‰¾åˆ°`newOnlineExam.vue`ï¼Œåœ¨å¤§æ¦‚`1300`è¡Œå¤„æ‰“ä¸ªæ–­ç‚¹ï¼Œé¡µé¢é‡Œç‚¹å‡»"äº¤å·"æ—¶ä¼šå‘½ä¸­æ­¤æ–­ç‚¹ï¼Œç„¶åå°†`rspTime`æ”¹å¤§ä¸€ç‚¹å³å¯ï¼ˆæˆ‘æ˜¯æŠŠç¬¬ä¸€ä½çš„1æ”¹æˆ2å°±å¥½äº†ï¼‰ã€‚

{% asset_img limit.png %}

## æ³¨æ„äº‹é¡¹

ç”±äºå¾ˆå¤šç®€ç­”é¢˜æ²¡æœ‰ç­”æ¡ˆï¼Œå¹¶ä¸”é—®é¢˜çš„é¡ºåºä¹Ÿä¸ä¸€è‡´ï¼Œæ‰€ä»¥å¯¹äºç®€ç­”é¢˜å°±éœ€è¦è‡ªè¡Œè°·æ­Œï¼Œæˆ–è€…ä½¿ç”¨ChatGPTï¼ˆå¹çˆ†ï¼ï¼ï¼ï¼‰æ¥ç”Ÿæˆç­”æ¡ˆğŸ˜‰

**éƒ‘é‡å£°æ˜ï¼šä½¿ç”¨æ—¶è¯·è‡ªè¡Œæ ¸å¯¹ç­”æ¡ˆï¼Œè€ƒ0åˆ†æˆ‘å¯ä¸ç®¡å•Š**