---
title: IOSå¼€å‘ä¹‹ä»˜è´¹è®¢é˜…å­¦ä¹ ç¬”è®° - Revenuecatç¯‡
tags:
  - IOS
  - ä»˜è´¹è®¢é˜…
  - SwiftUI
  - RevenueCat
categories:
  - IOS
abbrlink: 3769334848
date: 2023-02-04 01:00:59
---

è™½ç„¶å¬èµ·æ¥æœ‰ç‚¹å¥‡æ€ªï¼šSwiftè¯­æ³•éƒ½è¿˜æ²¡ç¢ç£¨æ˜ç™½å°±è¦å†™ä»˜è´¹è®¢é˜…çš„åŠŸèƒ½äº†ğŸ¤£ä½†éœ€æ±‚æ¥äº†æ€»ä¸èƒ½ä¸ç†æ˜¯å§ï¼Œæœ¬æƒ³åœ¨Bç«™æ‰¾æ‰¾ä»˜è´¹è®¢é˜…ç›¸å…³çš„å¼€å‘æ•™ç¨‹çš„ï¼Œç»“æœæ‰¾åˆ°çš„å…¨æ˜¯è¿™ç§ï¼š

{% asset_img 1.png %}

æœ€åæ‰¾åˆ°äº†`RevenueCat`ï¼Œåˆæ­¥åœ¨demoå®ç°äº†è®¢é˜…çš„åŠŸèƒ½ï¼Œç‰¹åšè®°å½•ã€‚

<!-- more -->

è€è§„çŸ©ï¼Œåœ¨åšæŸä¸€ä»¶äº‹å‰é¦–å…ˆè¦çœ‹çš„ä¾¿æ˜¯å®˜æ–¹æ•™ç¨‹äº†ï¼š[App å†…è´­ä¹°é¡¹ç›®é…ç½®æµç¨‹](https://help.apple.com/app-store-connect/?lang=zh-cn#/devb57be10e7)ï¼Œè¿™é‡Œè¯´æ˜äº†å¦‚ä½•è®¾ç½®è®¢é˜…é¡¹ã€å¦‚ä½•æ²™ç®±æµ‹è¯•ç­‰æ“ä½œï¼Œå¦‚æœä½ ä¹Ÿæ˜¯æˆ‘ä¸€æ ·çš„IOSå¼€å‘æ–°æ‰‹ï¼Œå»ºè®®æ˜¯å¿…çœ‹çš„ã€‚

# å…³äºRevenueCat

## è¯´æ˜

- è¿™ä¸ªäº§å“æä¾›äº†ç”¨äºå’ŒAppleé€šè®¯çš„APIæœåŠ¡ï¼ˆå¥½åƒå«Server to Serverï¼Ÿ)ï¼Œå¦å¤–æä¾›äº†Swift/OCçš„SDKç”¨äºä¸RevenueCaté€šè®¯åŠå¯¹StoreKitçš„åŒ…è£…ã€‚
- è¿™ä¸ªå±äºå•†ä¸šäº§å“ï¼Œæœˆé”€å”®é¢ä½äº1ä¸‡ç¾å…ƒä¸æ”¶å–ä»»ä½•è´¹ç”¨
- ä½¿ç”¨ä»–ä»¬æä¾›çš„Demoï¼Œå¯ä»¥å¿«é€Ÿå®ç°è®¢é˜…ç›®æ ‡

## ä½¿ç”¨æµç¨‹

### App Store Connecté…ç½®

1. åˆ›å»ºè®¢é˜…ç¾¤ç»„;
{% asset_img 2.png %}
2. åˆ›å»ºè®¢é˜…ï¼ˆè‡ªè¡Œè®¾å®šè®¢é˜…æ—¶é•¿ã€ä»·æ ¼æˆ–è€…[è¯•ç”¨æœŸ](https://help.apple.com/app-store-connect/#/deve1d49254f)ç­‰ç­‰ï¼‰;
{% asset_img 3.png %}

### RevenueCaté…ç½®

1. [æ³¨å†Œ](https://app.revenuecat.com/signup)`RevenueCat`å¸æˆ·;
2. æ–°å»ºApp Store Appï¼›
{% asset_img 4.png %}
å¡«å†™å¯¹åº”çš„APP nameã€App Bundle Idã€å…±äº«å¯†é’¥ï¼ˆåœ¨App Store Connect-APPä¿¡æ¯-Appä¸“ç”¨å…±äº«å¯†é’¥ä¸­å¯è§ï¼‰ï¼›
3. æ–°å»ºæˆåŠŸåå¯çœ‹åˆ°`RevenueCat App ID`ï¼ˆ**Demoä»£ç ä¸­ä½¿ç”¨**ï¼‰ã€`Apple Server Notification URL`ï¼ˆ**å¡«å…¥åˆ°App Store Connect-APPä¿¡æ¯-App Store æœåŠ¡å™¨é€šçŸ¥-æ²™ç›’ç¯å¢ƒæœåŠ¡å™¨ URL**ï¼‰ï¼›
{% asset_img 5.png %}
4. åˆ›å»ºEntitlementsï¼›
{% asset_img 6.png %}
5. ç‚¹å‡»Attachå…³è”Productsï¼Œç„¶åç‚¹å‡»`Add a new product`ï¼Œåˆ›å»ºäº§å“ï¼Œè¿™**éœ€è¦ä¸App Store Connectä¸­çš„è®¢é˜…åç§°ã€identifierä¿æŒä¸€è‡´**ï¼Œæœ€ç»ˆåº”è¯¥å¦‚ä¸‹å›¾ï¼š
{% asset_img 7.png %}
6. åˆ›å»ºOfferingsï¼›
{% asset_img 8.png %}
7. åœ¨Offeringsä¸‹åˆ›å»ºPackagesä»¥åŠå…³è”å¯¹åº”çš„Productï¼ˆå¦‚Annualå°±åº”è¯¥å…³è”quick.process.1yearï¼‰ï¼›
{% asset_img 9.png %}

### Demoä½¿ç”¨

1. Demo[æºç ä¸‹è½½](https://github.com/RevenueCat/purchases-ios/tree/main/Examples/MagicWeatherSwiftUI)ï¼›
2. å…³è”å¼€å‘è€…å¸æˆ·ã€TeamIdã€bundleIdç­‰ä¿¡æ¯ï¼›
3. å®‰è£…`RevenueCat`åŒ…ï¼šåœ¨Swift Package Managerä¸­æ·»åŠ URL https://github.com/RevenueCat/purchases-ios.gitï¼›
4. å¡«å†™æºç `Shared/Constants.swift`ä¸­çš„ApiKeyã€åŠentitlementIDï¼ˆæ­¤æ–‡è®¾ç½®çš„æ˜¯`ProAccess`ï¼‰ï¼›
{% asset_img 10.png %}

### æµ‹è¯•

1. [æ·»åŠ `æ²™ç›’æµ‹è¯•å‘˜`](https://appstoreconnect.apple.com/access/users/sandbox)ï¼Œæ­¤å¤„çš„é‚®ç®±ä¸èƒ½æ³¨å†Œè¿‡AppleIdï¼Œæˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯[ä¸´æ—¶é‚®ç®±æœåŠ¡](https://www.linshiyouxiang.net/)ï¼›
{% asset_img 11.png %}
2. åœ¨`è®¾ç½®-App Store-æ²™ç®±å¸æˆ·`ç™»å½•åˆšåˆšåˆ›å»ºçš„å¸æˆ·ï¼›
3. å°†xcodeè¿è¡Œç›®æ ‡è®¾ä¸ºè‡ªå·±çš„æ‰‹æœºï¼Œè¿è¡Œå³å¯æŸ¥çœ‹æ•ˆæœï¼›

åœ¨Userç•Œé¢ç™»å½•æ²™ç®±å¸æˆ·ï¼Œå¯ä»¥çœ‹åˆ°è®¢é˜…çŠ¶æ€æ˜¯æœªæ¿€æ´»çš„
{% asset_img 12.png %}

æ­¤æ—¶åœ¨Weatherç•Œé¢ç‚¹å‡»`Change the Weather`ä¼šå¼¹å‡ºè´­ä¹°è®¢é˜…çš„ä¿¡æ¯
{% asset_img 13.png %}

ç‚¹å‡»è´­ä¹°å°±ä¼šå¼¹å‡ºè´­ä¹°ç¡®è®¤
{% asset_img 14.png %}

è¾“å…¥å¯†ç è´­ä¹°ä¹‹åUserç•Œé¢çš„çŠ¶æ€å°±ä¼šå˜ä¸ºå·²æ¿€æ´»ï¼Œæ­¤æ—¶å°±å¯ä»¥éšæ„ç‚¹å‡»`Change the Weather`æ¥æ”¹å˜å¤©æ°”äº†ï¼
{% asset_img 15.png %}

## æ€»ç»“

RevenueCatæœ¬èº«ä¼˜ç‚¹è¿˜æ˜¯å¾ˆæ˜æ˜¾çš„ï¼ŒIOSå¼€å‘è€…å¯ä»¥ä¸“æ³¨å‰ç«¯ä¸šåŠ¡é€»è¾‘ï¼Œä¸ç”¨å…³æ³¨åå°ç›¸å…³çš„ä¸œè¥¿ï¼Œå¹¶ä¸”ä½œä¸ºä¸€ä¸ªæˆç†Ÿçš„äº§å“ï¼Œåº”è¯¥æ˜¯å…¨çƒèŒƒå›´çš„é«˜å¯ç”¨çš„ï¼Œæ¯”è‡ªå»ºçš„æœåŠ¡å™¨åº”è¯¥è¦ç¨³å®šå¾ˆå¤šã€‚

ç¼ºç‚¹å°±æ˜¯åœ¨å›½å†…è®¿é—®å¥½åƒé€Ÿåº¦ä¸å¤Ÿå¿«ï¼Œå¢ƒå¤–è®¿é—®åº”è¯¥æ²¡æœ‰è¿™ä¸ªé—®é¢˜ã€‚

è¿™æ¬¡å…ˆè®°å½•åˆ°è¿™é‡Œï¼Œåº”è¯¥æœ‰ä¸å°‘å¤„ä¸å¤Ÿæ¸…æ¥šç”šè‡³æœ‰é”™è¯¯çš„åœ°æ–¹ï¼Œä¸‹æ¬¡åŠ å¼ºğŸ¥¹ğŸ¥¹